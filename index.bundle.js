!function(n){function t(t){for(var r,i,l=t[0],s=t[1],d=t[2],p=0,f=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,d||[]),e()}function e(){for(var n,t=0;t<o.length;t++){for(var e=o[t],r=!0,l=1;l<e.length;l++){var s=e[l];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),n=i(i.s=e[0]))}return n}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(n,t,e){i.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,t){if(1&t&&(n=i(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)i.d(e,r,function(t){return n[t]}.bind(null,r));return e},i.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(t,"a",t),t},i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=s;o.push([22,1]),e()}([,,,,,,,,,function(n,t,e){var r=e(10);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(4)(r,a);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,"body {\n\tmargin: 0px;\n\twidth: 100vw;\n\toverflow-x: hidden;\n\t/*default text sans-serif font*/\n\tfont-family: 'Open Sans', sans-serif;\n}\n\n.container{\n\tmargin: 0 15px;\n\t/*to allow fullwidth elements be shown*/\n\t/*overflow: hidden; */\n}\n\n.row{\n\twidth: 100%;\n}\n\n.center{\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.mobile-hidden{\n\tdisplay: none;\n}\n\n.desktop-hidden{\n\tdisplay: block;\n}\n\n.serif {\n\t/*title serif font */\n\tfont-family: 'ZCOOL XiaoWei', serif;\n}\n\n.white {\n\tcolor: #fff;\n}\n\n.yellow {\n\tcolor: #dcba7d;\n}\n\na {\n\tcolor: black;\n\ttext-decoration: underline;\n\ttext-decoration-color: #dcba7d;\n\ttransition: all .3s ease-in-out;\n}\n\na:hover {\n\tcolor: white;\n\tbackground: #dcba7d;\n}\n\n.icon > a:hover, .footer-icon > a:hover{\n\tbackground: none;\n}\n\n.header{\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground: url(assets/images/header-thumbnail-portrait.jpg) no-repeat center center fixed; \n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n\n  /*IE compatibility*/\n  filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='assets/images/header-image-v4.jpg', sizingMethod='scale');\n\t-ms-filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')\";\n\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: relative;\n}\n\n#header-video {\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-width: 100%; \n  min-height: 100%;\n  z-index: 0;\n}\n\n#header-caption {\n  padding: 10px 0; \n  margin: 0 50px;\n}\n\n.header-container{\n\tmargin: 0 8%;\n\twidth: auto;\n\theight: auto;\n\tz-index: 1;\n\tpadding-bottom: 20vh;\t\n}\n\n.header-title{\n\tfont-size: 3em;\n\tfont-family: 'ZCOOL XiaoWei', serif;\n\tcolor: #fff\n}\n\n.header-intro{\n\tfont-size: 0.8em;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  letter-spacing: normal;\n  text-align: left;\n  color: #dcba7d;\n}\n\n.header-indent{\n\tmargin-left: 21px;\n}\n\n.nav {\n\twidth: 100vw;\n\tbox-sizing: border-box;\n\tpadding: 0 10px;\n\theight: 19px;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: #1d1d1d;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tz-index: 999;\n}\n\n.nav-left, .nav-right{\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-around;\n\tfont-size: 12px;\n\tline-height: 12px;\n}\n\n\n.icon {\n\twidth: 20px;\n\theight: 100%;\n\tmax-height: 23px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tborder-left: 1px solid #dcba7d;\n\tcursor: pointer;\n}\n\n.nav-right:last-child{\n\tborder-right: 1px solid #dcba7d;\n}\n\n.icon:hover{\n\tbackground: #fff;\n}\n\n.pangolin-logo {\n  width: 12px;\n  height: 12px;\n  margin-right: 10px;\n  object-fit: contain;\n}\n\n/*content styles*/\n.chapter-title{\n\tfont-family: 'ZCOOL XiaoWei', serif;\n\tfont-size: 20px;\n\tcolor: #3b3b3b;\n\ttext-align: center;\n}\n\n.byline{\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\ttext-transform: uppercase;\n\tfont-size: 10px;\n\tcolor: #dcba7d;\n}\n\n.bookmark{\n\tposition: absolute;\n\tright:0;\n\tbottom: 0;\n\twidth: 10px;\n\theight: 15px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(assets/images/bookmark.svg);\n\tbackground-repeat: no-repeat;\n}\n\n.footer{\n\theight: auto;\n\tmin-height: 250px;\n\tmargin-bottom: 50px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: flex-end;\n\talign-items: flex-end;\n\tfont-size: 10px;\n\tcolor: #220f07;\n\ttext-align: right;\n}\n\n.pangolin-logo-footer {\n  width: 68.6px;\n  height: 75px;\n  object-fit: contain;\n}\n\n.footer-icon {\n\twidth: 30px;\n\theight: 100%;\n\tmax-height: 23px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tcursor: pointer;\n}\n\n.footer-icons{\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n}\n\n.article-image{\n\twidth: 100%;\n\theight: auto;\n}\n/*content styles*/\n\n/*component*/\n.quote{\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\tpadding: 0 10px 10px 10px;\n\tborder-bottom: 1px solid #dcba7d;\n\tbox-sizing: border-box;\n  font-family: 'ZCOOL XiaoWei', serif;\n  font-size: 26px;\n  font-weight: normal;\n  color: #dcba7d;\n}\n\n.caption{\n  font-size: 10px;\n  font-weight: 300;\n  font-style: normal;\n  font-stretch: normal;\n  color: #3b3b3b;\n  border-bottom: 1px solid #dcba7d;\n  margin: 10px 0 0 0;\n  padding-bottom: 10px; \n}\n/*component*/\n\n/*animated map svg v1 [deprecated]*/\n/*map container is pinned as position: fixed, margin won't apply*/\n#map-container{\n\twidth: 100vw;\n\theight: auto;\n\tbackground: #fff;\n\toverflow: hidden;\n\tmargin: 0 -15px;\n}\n\n#map{\n\twidth: 100%;\n\tmargin: 15px 0px;\n\theight: auto;\n}\n\npath{\n\tstroke-linecap: round;\n\tstroke-linejoin: round;\n}\n\n.path{\n\tfill:none;\n\tstroke:#000;\n\tstroke-width: 1px;\n}\n\n.path-stop{\n\tfill: #fff;\n\tstroke: #000;\n\tstroke-width: 0.3px;\n}\n\n.path-stop:hover{\n\tcursor: pointer;\n\tfill: #ccc;\n}\n/*animated map svg v1 [deprecated]*/\n\n#geo-map-container{\n\twidth: 100%;\n\theight: auto;\n\tbackground: #fff;\n\toverflow: hidden;\n\tmargin: 15px 0;\n}\n\n#geo-map{\n\twidth: 100%;\n}\n\n.vis-title {\n  font: 16px 'Open Sans';\n  font-weight: bold;\n  fill: white;\n}\n\n.seizure-total{\n\tfont: 4em 'Open Sans';\n  font-weight: bold;\n  fill: white;\n}\n\n.legend-text{\n\tfill: white;\n\tfont-family: 'Open Sans', sans-serif;\n\tfont-size: 14px;\n}\n\n.circle-hover {\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.area {\n  fill: steelblue;\n  fill-opacity: 0.7;\n}\n\n.axis path,\n.axis line {\n  fill: none;\n  stroke: #000;\n  shape-rendering: crispEdges;\n}\n\n.brush .extent {\n  stroke: #fff;\n  fill: #000;\n  fill-opacity: .25;\n  shape-rendering: crispEdges;\n}\n\n.bartip{\n  position      : absolute;\n  text-align    : center;\n  max-width     : 70px;\n  max-height    : 30px;\n  padding       : 8px;\n  border        : none;\n  border-radius : 8px;\n  margin-top    : -30px;\n  font          : 10px sans-serif;\n  background    : black;\n  color         : white;\n  pointer-events: none;\n}\n\n/*snazzy map*/\n.snazzy{\n\t/*960 : 540*/\n\twidth: 100vw;\n\theight: 56.25vw;\n\tmargin-left: -15px;\n\tmargin-right: -15px;\n\tbackground-size: cover;\n\tposition: relative;\n}\n\n.routes-svg, .routes-bg{\n\twidth: 100%;\n}\n\n.routes-svg{\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n}\n\n.routes-bg{\n\tposition: absolute;\n\tdisplay: block;\n\theight: auto;\n\tleft: 0;\n\ttop: 0;\n}\n/*snazzy map*/",""])},,function(n,t,e){var r=e(13);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(4)(r,a);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,"@media only screen and (min-device-width: 480px) {\n\t.container{\n\t\tmargin: 0 25%;\n\t}\n\n\t.mobile-hidden{\n\t\tdisplay: block;\n\t}\n\n\t.desktop-hidden{\n\t\tdisplay: none;\n\t}\n\n  .header { \n    background-image: url('assets/images/header-image-desktop.jpg'); \n  }\n\n  .header-container{\n\t\tmargin: 0 28% 0 12%;\n\t}\n\n\t.header-title{\n\t\tfont-size: 7vw;\n\t}\n\n\t.nav {\n\t\theight: 23px;\n\t\tpadding: 0 30px;\n\t}\n\n\t#progress-div{\n    top: 23px !important;\n  }\n\n  .footer{\n  \tflex-direction: row;\n  \tjustify-content: space-between;\n  \talign-items: flex-end;\n  }\n\n  .quote-para{\n  \tposition: relative;\n  \twidth: 60%;\n  }\n\n  .quote{\n  \tposition: absolute;\n  \ttop: 0;\n  \tleft: 100%;\n  }\n\n  .snazzy{\n\t\tmargin: 0 -25vw;\n\t}\n\t\n\t/*animated map svg v1 [deprecated]*/\n  #map-container{\n\t\tmargin: 0 -25vw !important;\n\t}\n\n\t.scrollmagic-pin-spacer {\n\t\tmargin: 0 -25vw !important;\n\t\t/*padding-left: 25vw !important;*/\n\t}\n  /*animated map svg v1 [deprecated]*/\n}",""])},function(n,t,e){var r=e(15);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(4)(r,a);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,"#map-tooltip{\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n\tflex-direction: column;\n\twidth: 100px;\n\theight: 100px;\n\tbackground: #fff;\n\tborder-radius: 5px;\n\tborder: 1px solid #000;\n\tz-index: 2;\n\toverflow: hidden;\n\tpadding: 5px;\n}\n\n#map-tooltip-title{\n\tfont-size: 14px;\n\tfont-weight: 600;\n}\n\n#map-tooltip-title-close{\n\tfont-family: Sans-serif;\n\tposition: absolute;\n\ttop: 5px;\n\tright: 5px;\n}\n\n#map-tooltip-description{\n\tfont-size: 11px\n}\n\n#map-tooltip-underlay{\n\tdisplay: none;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 1;\n\toverflow: hidden;\n}",""])},function(n,t,e){var r=e(17);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(4)(r,a);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,"/* Progress Bar */\n#progress-div{\n    position:fixed;\n    width:100%;\n    height:3.5px;\n    background-color: #dcba7d;\n    top:19px;\n    left:0px;\n    z-index: 999;\n}\n#progress-bar{\n    position: absolute;\n    float:left;\n    height:100%;\n    background-color: #fc7a00;\n    -webkit-transition: width 0.3s; /* Safari */\n    transition: width 0.3s;\n}\n#progress-div:hover, #progress-bar:hover{\n    cursor: pointer;\n}\n/* Progress Bar */",""])},function(n,t,e){var r=e(19);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(4)(r,a);r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(3)(!1)).push([n.i,'#overlay{\n\tdisplay: none;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 999;\n\tbackground: rgba(0, 0, 0, 0.4);\n\toverflow: hidden;\n}\n\n#overlay form {\n\tdisplay: inherit;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\theight: auto;\n}\n\n#overlay input[type="email"]{\n\tdisplay: inherit;\n\twidth: 80%;\n\tmax-width: 300px;\n\tline-height: 25px;\n\tborder-radius: 5px;\n\tz-index: 1000;\n}\n\n#overlay button{\n\tdisplay: inherit;\n\tbackground: #fff;\n\tmargin: 20px; \n\tborder-radius: 5px;\n\tz-index: 1000;\n}\n\n#submit-message{\n\tdisplay: inherit;\n\tfont-size: 10px;\n\tcolor: red;\n}',""])},,,function(n,t,e){"use strict";e.r(t);e(9),e(12),e(14),e(16),e(18);var r=e(2),a=e.n(r),o=(e(6),function(n){return document.querySelector(n)}),i=function(){};i.ctrlHeaderAudio=function(){var n=o("#header-video"),t=new a.a.Controller;new a.a.Scene({triggerElement:o("#header-caption"),triggerHook:"onLeave",duration:0}).on("start",function(t){var e=t.scrollDirection;t.target;"FORWARD"==e?(console.log("muted"),n.muted=!0):(console.log("unmuted"),n.muted=!1)}).addTo(t)},i.initScrollController=function(){var n=o("#progress-bar"),t=document.body,e=t.offsetHeight,r=new a.a.Controller,i=(new TimelineMax).to(n,1,{width:"100%",ease:Linear.easeNone});new a.a.Scene({triggerElement:t,triggerHook:"onLeave",duration:e,tweenChanges:!0}).setTween(i).addTo(r)},i.initClickNav=function(){var n=o("#progress-div"),t=(o("#progress-bar"),function(n){var t=document.body.offsetWidth,e=document.body.offsetHeight,r=parseInt(n.pageX);if(r>0){var a=e*(r/t);window.scrollTo({top:a,behavior:"smooth"})}});n.addEventListener("click",t),n.addEventListener("touchend",t)};var l=i,s=function(){};s.initHashController=function(){var n,t=(n=".chapter-anchor",document.querySelectorAll(n)),e=new a.a.Controller;t.forEach(function(n){new a.a.Scene({triggerElement:n,duration:n.offsetHeight}).addTo(e).on("enter leave",function(t){var e=n.id;window.history.pushState(null,null,"#".concat(e))})})};var d=s;var c=function(n){var t=function(n){var t,e=n.elements,r=Object.keys(e).filter(function(n){return"honeypot"!==e[n].name||(t=e[n].value,!1)}).map(function(n){return void 0!==e[n].name?e[n].name:e[n].length>0?e[n].item(0).name:void 0}).filter(function(n,t,e){return e.indexOf(n)==t&&n}),a={};return r.forEach(function(n){var t=e[n];if(a[n]=t.value,t.length){for(var r=[],o=0;o<t.length;o++){var i=t.item(o);(i.checked||i.selected)&&r.push(i.value)}a[n]=r.join(", ")}}),a.progress=window.location.hash,a.url=window.location.href,r=r.concat(["progress","url"]),a.formDataNameOrder=JSON.stringify(r),a.formGoogleSheetName=n.dataset.sheet||"responses",a.formGoogleSend=n.dataset.email||"",{data:a,honeypot:t}}(n),e=document.querySelector("#submit-message"),r=t.data;if(t.honeypot)return e.innerHTML="Spam Detected!",!1;e.innerHTML="Sending...",function(n){for(var t=n.querySelectorAll("button"),e=0;e<t.length;e++)t[e].disabled=!0}(n);var a=n.action,o=new XMLHttpRequest;o.open("POST",a),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&(n.reset(),e.innerHTML="Your email has been received!")};var i=Object.keys(r).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(r[n])}).join("&");o.send(i)},p={},f={isOverlayShown:!1,isEmailSaved:!1},u=function(n){return document.querySelector(n)};p.initBookmark=function(){var n,t=(n=".bookmark",document.querySelectorAll(n)),e=u("#overlay");t.forEach(function(n){n.addEventListener("click",function(n){e.style.display=f.isOverlayShown?"none":"flex",f.isOverlayShown=!f.isOverlayShown})}),e.addEventListener("click",function(n){e.style.display="none",f.isOverlayShown=!1});var r=u("#submit-reminder"),a=u("input#email"),o=u("#submit-message");a.addEventListener("click",function(n){n.stopPropagation()}),r.addEventListener("click",function(n){if(n.preventDefault(),n.stopPropagation(),o.innerHTML="",e=a.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&!f.isEmailSaved){var t=u("#bookmark-req-form");c(t),f.isEmailSaved=!0,a.disabled=!0,r.disabled=!0}else o.innerHTML="Invalid Email!";var e})};var g=p,m=e(0);function h(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],r=!0,a=!1,o=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done)&&(e.push(i.value),!t||e.length!==t);r=!0);}catch(n){a=!0,o=n}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v={},x=function(n){return document.querySelector(n)},b=m.k().range([5,25]),y=m.m("#geo-map-container").append("svg").attr("x",0).attr("y",0).attr("viewBox","0 0 960 630").attr("id","geo-map");y.append("rect").attr("width","100%").attr("height","500").attr("fill","#3b3b3b");y.append("clipPath").attr("id","seizure-map-clip").append("rect").attr("width","100%").attr("height","500");var w=y.append("g").attr("clip-path","url(#seizure-map-clip)").attr("class","countries"),k=m.g().scale(160).translate([150,320]),T=m.h().projection(k),M=y.append("text").attr("class","vis-title").attr("transform","translate(650,140)").text("pangolin trafficked").append("tspan").attr("x",0).attr("dy","1.3em").text("(select a time range)"),z=y.append("rect").attr("transform","translate(650,106)").attr("height","5em").attr("fill","red"),S=y.append("text").attr("transform","translate(660,100)").attr("class","seizure-total").text("0"),E=y.append("g").attr("class","timeline"),j=m.m(".container").append("div").attr("class","bartip").style("display","none"),O=y.append("g").attr("transform","translate(780, 450)").attr("id","seizure-map-legend");O.append("circle").attr("x",0).attr("y",0).attr("r",6).attr("fill","rgba(240, 135, 24)").attr("stroke-width","0.5px").attr("stroke","#fff"),O.append("text").attr("x",14).attr("y",6).attr("class","legend-text").text("Current Year");var L=y.append("g").attr("id","seizure-map-play-btn").attr("transform","translate(50, 450)"),I=L.append("path").attr("id","play-pause").attr("transform","translate(-9, -9)").attr("d","M11 22h-4v-20h4v20zm6-20h-4v20h4v-20z").attr("fill","#fff"),A=L.append("path").attr("id","play-cont").attr("transform","translate(-9, -9)").attr("d","M3 22v-20l18 10-18 10z").attr("fill","#fff");function C(n,t){var e=y.selectAll("circle.seizure-bubble").data(n,function(n){return n.id});"2000"==t&&y.selectAll("circle.seizure-bubble").remove(),e.enter().append("circle").attr("class","seizure-bubble").attr("fill","rgba(240, 135, 24, 0.3)").attr("cx",function(n){return k([+n.Longitude,+n.Latitude])[0]}).attr("cy",function(n){return k([+n.Longitude,+n.Latitude])[1]}).attr("r",0).transition().duration(500).attr("r",function(n){return b(+n.ESTNUM)}),e.exit().transition().duration(500).attr("fill","rgba(201, 62, 62, 0.3)")}function H(n,t){var e=[];n.map(function(n){e.indexOf(n.YEAR)<0&&e.push(n.YEAR)});return setInterval(function(){var r=e[t.curr_idx];C(n.filter(function(n){return n.YEAR==r}),r),t.curr_idx=(t.curr_idx+1)%e.length,N(n,r)},1e3)}function N(n,t){M.text("2000 - "+t);var e=n.filter(function(n){return+n.YEAR<=t}).map(function(n){return n.ESTNUM}).reduce(function(n,t){return n+t},0);S.text("".concat(m.f(",")(Math.round(e)))),z.attr("x",S.node().getBBox().x).attr("y",S.node().getBBox().y).attr("width",+S.node().getBBox().width+20)}v.renderMap=function(){Promise.all([m.i("assets/maps/world_countries.json"),m.c("assets/data/valid-seizure-num-date.csv")]).then(function(n){var t=h(n,2),e=t[0],r=t[1],o=m.n("%Y-%m-%d %H:%M:%S"),i=[],l={},s=r.map(function(n,t){return n.TIME=o(n.Date),n.YEAR=n.TIME.getFullYear(),n.ESTNUM=+n.ESTNUM,n.Latitude=+n.Latitude,n.Longitude=+n.Longitude,l[n.TIME]?l[n.TIME]+=n.ESTNUM:l[n.TIME]=n.ESTNUM,n});Object.keys(l).forEach(function(n){i.push({TIME:new Date(n),ESTNUM:l[n]})}),i.sort(function(n,t){return n.TIME-t.TIME}),b.domain(m.e(s,function(n){return+n.ESTNUM})),function(n,t){var e={top:10,right:10,bottom:20,left:15},r=960-e.left-e.right,a=120-e.bottom;E.attr("transform","translate("+e.left+" , 510)");var o={};t.forEach(function(n){var t=n.TIME.getFullYear()+"";o[t]||(o[t]=0),o[t]+=+n.ESTNUM});var i=Object.keys(o).map(function(n){return{TIME:new Date(+n,1,1),TOTAL:o[n]}}),l=m.l().domain(m.e(t.map(function(n){return n.TIME}))).range([0,r]),s=m.j().domain(m.e(i.map(function(n){return n.TOTAL}))).range([a,0]),d=m.a(l),c=m.b(s).ticks(3).tickFormat(m.f("~s"));E.append("g").attr("class","bars").selectAll("rect").data(i,function(n){return n.id}).enter().append("rect").attr("class","bar").style("fill","#dcba7d").attr("x",function(n){return l(n.TIME)}).attr("width",Math.round(r/19)-10+"px").attr("y",function(n){return s(n.TOTAL)}).attr("height",function(n){return a-s(n.TOTAL)}).on("mouseover",function(){j.style("display","inline"),m.m(this).style("opacity",.5)}).on("mousemove",function(n){j.html(n.TIME.getFullYear()+"<hr/>"+n.TOTAL).style("left",m.d.pageX-34+"px").style("top",m.d.pageY-12+"px")}).on("mouseout",function(){j.style("display","none"),m.m(this).style("opacity",1)}),E.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(d),E.append("g").attr("class","y axis").call(c),E.append("text").attr("transform","rotate(-90)").attr("dy","-1em").style("text-anchor","end").style("font-size","8px").text("# Pangolins")}(0,i),d=s,c=new a.a.Controller,p=null,f=!1,u={curr_idx:0},g=function(){A.attr("fill",f?"#fff":"none"),I.attr("fill",f?"none":"#fff")},new a.a.Scene({triggerElement:x("#geo-map-container"),duration:x("#geo-map-container").offsetHeight}).on("enter",function(){console.log("enter map"),y.selectAll("circle.seizure-bubble").remove(),p=H(d,u),f=!0,g()}).on("leave",function(){console.log("leave map"),clearInterval(p),f=!1,y.selectAll("circle.seizure-bubble").remove(),C(d),N(d,2019),g()}).addTo(c),x("#seizure-map-play-btn").addEventListener("click",function(n){f?(clearInterval(p),f=!1):(p=H(d,u),f=!0),g()}),w.selectAll("path").data(e.features).enter().append("path").attr("d",T).style("fill","#694b2d");var d,c,p,f,u,g}).catch(function(n){console.log("d3 err",n)})};var D=v,q=e(1),P=e.n(q),R=(e(21),function(n){return document.querySelector(n)}),B="assets/maps/Malaysia/IMG/",Y="assets/maps/Malaysia/SVG/",U={jpgs:["".concat(B,"map-01.jpg"),"".concat(B,"map-02.jpg"),"".concat(B,"map-03.jpg"),"".concat(B,"map-04.jpg"),"".concat(B,"map-05.jpg"),"".concat(B,"map-06.jpg")],svgs:["".concat(Y,"Malaysia map-01.svg"),"".concat(Y,"Malaysia map-02.svg"),"".concat(Y,"Malaysia map-03.svg"),"".concat(Y,"Malaysia map-04.svg"),"".concat(Y,"Malaysia map-05.svg"),"".concat(Y,"Malaysia map-06.svg"),"".concat(Y,"Malaysia map-07.svg")],maps:[R("#malaysia-routes-1")]};function _(n){n.map(function(n){return n.querySelector(".marker-inner")});var t=n.map(function(n){return n.querySelector(".marker-outter")});P.a.fromTo(t,1,{attr:{r:20},opacity:.4},{attr:{r:55.68},opacity:0}).repeat(-1)}function X(n,t){n.querySelector(".routes-bg").src=t}U.MapCtrl1=function(){var n=new a.a.Controller,t=U.maps[0],e={opacity:1,ease:Linear.easeNone},r={opacity:0,ease:Linear.easeNone},o=new a.a.Scene({triggerElement:t,triggerHook:"onLeave",duration:"200%",reverse:!0}).on("enter",function(){this.setPin(this.triggerElement())}).addTo(n).duration();new a.a.Scene({triggerElement:t,triggerHook:"onLeave",duration:o/4,reverse:!0}).on("enter",function(){return(new TimelineMax).add(P.a.to(R("#arrows"),.5,e)).add(P.a.to(R("#melaka-label"),.5,e)).add(P.a.to(R("#caption01"),.5,e))}).on("leave",function(){var n=[R("#arrows"),R("#melaka-label"),R("#caption01")];P.a.killTweensOf(n),P.a.to(n,.5,r)}).addTo(n),new a.a.Scene({triggerElement:t,triggerHook:"onLeave",duration:o/4,offset:o/4,reverse:!0}).on("enter",function(){return(new TimelineMax).add(P.a.to(R("#forest-fill"),.5,e)).add(P.a.to(R("#forest-label"),.3,e))}).on("leave",function(){var n=[R("#forest-fill"),R("#forest-label")];P.a.killTweensOf(n),P.a.to(n,.5,r)}).on("start",function(n){var e=n.scrollDirection;n.target;X(t,"FORWARD"==e?U.jpgs[1]:U.jpgs[0])}).addTo(n),new a.a.Scene({triggerElement:t,triggerHook:"onLeave",duration:o/2,offset:o/2,reverse:!0}).on("start",function(n){var a=n.scrollDirection;n.target;if("FORWARD"==a)X(t,U.jpgs[2]),(new TimelineMax).add(P.a.to(R("polyline#thai-border"),1,{strokeDashoffset:0,ease:Linear.easeNone})).add(P.a.to(R("#thai-label"),.5,e));else{X(t,U.jpgs[1]);var o=[R("polyline#thai-border"),R("#thai-label")];P.a.killTweensOf(o),(new TimelineMax).add(P.a.to(R("polyline#thai-border"),.3,{strokeDashoffset:3579.52,ease:Linear.easeNone}),0).add(P.a.to(R("#thai-label"),.3,r),0)}}).setTween((new TimelineMax).add(P.a.to(R("#thai-line"),1,{strokeDashoffset:0,ease:Linear.easeNone})).add(P.a.to([R("#bukit-text"),R("#marker-bukit")],.2,e),1).addCallback(function(){_([R("#marker-bukit")])},1.2).add(P.a.to([R("#marker-rantau"),R("#marker-padang"),R("#padang-text"),R("#rantau-text")],.2,e),1.2).addCallback(function(){_([R("#marker-rantau"),R("#marker-padang")])},1.4)).addTo(n)};var W=function(){U.MapCtrl1()};window.addEventListener("DOMContentLoaded",function(){l.ctrlHeaderAudio(),l.initScrollController(),l.initClickNav(),d.initHashController(),g.initBookmark(),D.renderMap(),W()})}]);